<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="`pF.X4ee~ztGJ[}YqcDc">animationStep</variable><variable id="J?XrMfkT#]Ep2VnY7!0H">soundLevel</variable><variable id="*rRD[{N2s;-mm{x0cu+/">soundThreshold</variable><variable id="[bz(Iwbhk!HYS,[Lo-L1">toggleCount</variable><variable id="fk(,;3i}g:VU_?4h7H]@">lightOn</variable></variables><comment id="MkyQ.N/FHCVzw|KZhtI*" x="0" y="0" w="200" h="120">
Initialize variables
</comment><block type="pxt-on-start" id="@x#FTrNQ:2cghf@X%E@5" x="20" y="20"><statement name="HANDLER"><block type="variables_set" id="w*K,.q8rM]gD:))htXU."><field name="VAR" id="*rRD[{N2s;-mm{x0cu+/">soundThreshold</field><value name="VALUE"><shadow type="math_number" id="rJqg_Q~k88U@[(O]u#81"><field name="NUM">150</field></shadow></value><next><block type="device_print_message" id="?j^qpc3}Y@HOC86CY0*6"><comment pinned="false" h="80" w="160">On start: Show welcome message and clear the display</comment><value name="text"><shadow type="text" id="{]GcSCIIEOY#Owss0Mno"><field name="TEXT">Voice Light</field></shadow></value><next><block type="device_clear_display" id="S:N]EP-.%]NgkR0N+BRb"></block></next></block></next></block></statement></block><block type="device_button_event" id="?Rd|RNj.-4H;+o;z3w@a" x="395" y="20"><field name="NAME">Button.AB</field><comment pinned="false" h="80" w="160">Show toggle history with Button A+B</comment><statement name="HANDLER"><block type="device_print_message" id="F+IO_BdA3,9MOd]bJS#a"><value name="text"><shadow type="text" id="T?GkO3/R)b_t@85Wh7pi"><field name="TEXT">Toggles</field></shadow></value><next><block type="device_show_number" id="9P{C]cW.a*4c*lfb:)wU"><value name="number"><block type="variables_get" id="U7Z6Fox4P[[},Hb`xJXb"><field name="VAR" id="[bz(Iwbhk!HYS,[Lo-L1">toggleCount</field></block></value></block></next></block></statement></block><block type="device_button_event" id="dr=~ks2Rb`|PGh~=MZnP" x="734" y="20"><field name="NAME">Button.A</field><comment pinned="false" h="80" w="160">Increase threshold with Button A</comment><statement name="HANDLER"><block type="variables_set" id="OW1_rk`(Eg#s,J[QA`ul"><field name="VAR" id="*rRD[{N2s;-mm{x0cu+/">soundThreshold</field><value name="VALUE"><shadow type="math_number" id="19,J=[|]ku!uL$C!M3Gc"><field name="NUM">0</field></shadow><block type="math_op2" id="OqTjq#A}hmXX]x{i_BqQ"><field name="op">min</field><value name="x"><block type="math_arithmetic" id=".,}ag2x%{4IS?CHfysOi"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="!~j=5)0*ov_x*b!Ufv$B"><field name="NUM">0</field></shadow><block type="variables_get" id="8I+Yc.1NTK,N^?c{P*]i"><field name="VAR" id="*rRD[{N2s;-mm{x0cu+/">soundThreshold</field></block></value><value name="B"><shadow type="math_number" id="*3hJ0L+XQ!#}grW_1lu`"><field name="NUM">10</field></shadow></value></block></value><value name="y"><shadow type="math_number" id="Z9EykfNHX.*AHUBiEEpJ"><field name="NUM">255</field></shadow></value></block></value><next><block type="device_print_message" id="C=ek(~av-EJKhx)jRita"><value name="text"><shadow type="text" id="!PUhH^(WxgsCVSVru!#a"><field name="TEXT">Threshold</field></shadow></value><next><block type="device_show_number" id="IcPd5Sr5-~NV1PW8qDve"><value name="number"><block type="variables_get" id="w*7_Y2#!qcbkm^B@V243"><field name="VAR" id="*rRD[{N2s;-mm{x0cu+/">soundThreshold</field></block></value></block></next></block></next></block></statement></block><block type="device_button_event" id="./0-9OR_nhx)CeE]g`qJ" x="1583" y="20"><field name="NAME">Button.B</field><comment pinned="false" h="80" w="160">Decrease threshold with Button B</comment><statement name="HANDLER"><block type="variables_set" id="mt#I@30=q,24^1o?kS:y"><field name="VAR" id="*rRD[{N2s;-mm{x0cu+/">soundThreshold</field><value name="VALUE"><shadow type="math_number" id="eaj(~B~:WAo6)c*V[fU*"><field name="NUM">0</field></shadow><block type="math_op2" id=",[vDYf]~ALxQ]M/iKL-B"><field name="op">max</field><value name="x"><block type="math_arithmetic" id="1u4[_x2i4o=CT|2Qd=XO"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id=")6eybsdRAY#*59McNdy-"><field name="NUM">0</field></shadow><block type="variables_get" id="tdEz~LIzmXV}Fn+*5)im"><field name="VAR" id="*rRD[{N2s;-mm{x0cu+/">soundThreshold</field></block></value><value name="B"><shadow type="math_number" id="0EBQVZ=0EXu7PGK(Y4IR"><field name="NUM">10</field></shadow></value></block></value><value name="y"><shadow type="math_number" id="E:jBkMgN#Bb^66jSN}},"><field name="NUM">0</field></shadow></value></block></value><next><block type="device_print_message" id="EZm+Mi8LU7W:kHw]?!U/"><value name="text"><shadow type="text" id="p],rvz02gS{WEC^*~-aC"><field name="TEXT">Threshold</field></shadow></value><next><block type="device_show_number" id="5ASo=4iuXG}u*+l^B76j"><value name="number"><block type="variables_get" id="|~C_N9%8Dyy?mi62Aq;="><field name="VAR" id="*rRD[{N2s;-mm{x0cu+/">soundThreshold</field></block></value></block></next></block></next></block></statement></block><block type="device_forever" id="J:RT5e@I3GR!/LRuIjTB" x="20" y="308"><comment pinned="false" h="80" w="160">Forever loop to check sound level and toggle the light</comment><statement name="HANDLER"><block type="controls_if" id="mhqk1Z,{Fyu%@9@7a+Na"><mutation elseif="1" else="1"></mutation><comment pinned="false" h="80" w="160">Listening animation: Cycle through icons (diamond, square, heart)</comment><value name="IF0"><shadow type="logic_boolean" id="%s*0LiB9RK!eLWs:X+Fy"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="S%xlcV;JZLduVE]#P/Z{"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="U%^zLpI*GslN3ap9w*HB"><field name="NUM">0</field></shadow><block type="variables_get" id="~s5yz5)H1xclIUu[KD%y"><field name="VAR" id="`pF.X4ee~ztGJ[}YqcDc">animationStep</field></block></value><value name="B"><shadow type="math_number" id="#jehNF`Z*=FjwuwlH-qt"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="basic_show_icon" id="-9`79,G~l_=esBmE9?q#"><field name="i">IconNames.Diamond</field></block></statement><value name="IF1"><shadow type="logic_boolean" id="p`Zp=;9EEP~:`BTx:.@d"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="d8$txt{(xJSYdV($?|rv"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="F^las02B6ctSerk8b$hT"><field name="NUM">0</field></shadow><block type="variables_get" id="Df{4FB@6A3)f$$C(jTU-"><field name="VAR" id="`pF.X4ee~ztGJ[}YqcDc">animationStep</field></block></value><value name="B"><shadow type="math_number" id="G_/XN_%-D~7UT5-s$IYT"><field name="NUM">1</field></shadow></value></block></value><statement name="DO1"><block type="basic_show_icon" id="qLnd|~-rc;#?L6}Tg5;o"><field name="i">IconNames.Square</field></block></statement><statement name="ELSE"><block type="basic_show_icon" id="1+/h-0LvB}fQY*aIz?~a"><field name="i">IconNames.Heart</field></block></statement><next><block type="variables_set" id="~3h.3WKsjQ{VEkPcyac9"><field name="VAR" id="`pF.X4ee~ztGJ[}YqcDc">animationStep</field><value name="VALUE"><shadow type="math_number" id=";eS,EG8B3=w-hg]APgV1"><field name="NUM">0</field></shadow><block type="math_modulo" id=".P?r$0k[$mHjbx8`q8A{"><value name="DIVIDEND"><shadow type="math_number" id="f;d6|52IhF.w^Z_kF8Jn"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="D7-JdMDpRv?wfkd2]|y5"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="{HS|]b!gy7;16cxmC0mM"><field name="NUM">0</field></shadow><block type="variables_get" id="Pdov~Jvkz:6/A$U#O`k5"><field name="VAR" id="`pF.X4ee~ztGJ[}YqcDc">animationStep</field></block></value><value name="B"><shadow type="math_number" id="I2#^qh;Y,61v^OlGQN1)"><field name="NUM">1</field></shadow></value></block></value><value name="DIVISOR"><shadow type="math_number" id="#KMK@*}1xOF4Z]Hso0,1"><field name="NUM">3</field></shadow></value></block></value><next><block type="variables_set" id="H5{Rbb:fXJ0-!@[*??jX"><field name="VAR" id="J?XrMfkT#]Ep2VnY7!0H">soundLevel</field><comment pinned="false" h="80" w="160">Check sound level (simulates a clap or voice)</comment><value name="VALUE"><shadow type="math_number" id="W]YsE2NJi!M[s0qV!RBw"><field name="NUM">0</field></shadow><block type="device_get_sound_level" id=")Df8fdk)ix7PUEHwKu-S"></block></value><next><block type="controls_if" id="N#1c5|b^{L[Ru7{P1YEv"><value name="IF0"><shadow type="logic_boolean" id="U%_d1QjDlIT3fQ!-Embx"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="F_o:0)Cp}A5b.5wCFj_E"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="E@]/j]MN:n+f%S8xbX`-"><field name="NUM">0</field></shadow><block type="variables_get" id="q2*)Hv$zT^X3a`n(PClN"><field name="VAR" id="J?XrMfkT#]Ep2VnY7!0H">soundLevel</field></block></value><value name="B"><shadow type="math_number" id="[i$my+c!-nQ/m5?0IkzS"><field name="NUM">0</field></shadow><block type="variables_get" id=":8Y^w@xtW0qob`0*R438"><field name="VAR" id="*rRD[{N2s;-mm{x0cu+/">soundThreshold</field></block></value></block></value><statement name="DO0"><block type="variables_change" id="U/;Xh!1y5Wtmn]{F,ihK"><field name="VAR" id="[bz(Iwbhk!HYS,[Lo-L1">toggleCount</field><value name="VALUE"><shadow type="math_number" id=",Yzd]AeJQ]r5RES6NVDs"><field name="NUM">1</field></shadow></value><next><block type="controls_if" id="8fSOV+#=SLOBQMD:GsuU"><mutation else="1"></mutation><value name="IF0"><shadow type="logic_boolean" id="Fn.4GcYgQ)hUq8SgYKK4"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="N+,P;sFes7]{NyI?C.2x"><field name="VAR" id="fk(,;3i}g:VU_?4h7H]@">lightOn</field></block></value><statement name="DO0"><block type="variables_set" id="4!uwlV6~@5X57|4z4k]i"><field name="VAR" id="fk(,;3i}g:VU_?4h7H]@">lightOn</field><value name="VALUE"><shadow type="math_number" id="*]nV!-HDbpRzy{:OYBnN"><field name="NUM">0</field></shadow><block type="logic_boolean" id="hn]AI:Npio_Op`~WWVZh"><field name="BOOL">FALSE</field></block></value><next><block type="device_clear_display" id="xZD#{|9e{Dw:rtA(}W~G"><next><block type="device_print_message" id="}l8Kx]l1@Zh=.*KLd}OM"><value name="text"><shadow type="text" id="4^4d4mO{S+XC(|iEto_@"><field name="TEXT">Light OFF</field></shadow></value></block></next></block></next></block></statement><statement name="ELSE"><block type="variables_set" id="c2bo[h+S*3E|;dY.%,[B"><field name="VAR" id="fk(,;3i}g:VU_?4h7H]@">lightOn</field><value name="VALUE"><shadow type="math_number" id="{|3ZSq3_?G;xeNOn=RQ_"><field name="NUM">0</field></shadow><block type="logic_boolean" id="1F1/BKG3ZEP[j,[#;)2|"><field name="BOOL">TRUE</field></block></value><next><block type="device_show_leds" id="$Tb/ijZBNW2286}-4G#g"><field name="LEDS">`
        # # # # # 
        # # # # # 
        # # # # # 
        # # # # # 
        # # # # #
        `</field><next><block type="device_print_message" id="cXfwf9GWl0q+c/Eso3jJ"><value name="text"><shadow type="text" id=",MDCAaA[i|1C#$9)(9Vd"><field name="TEXT">Light ON</field></shadow></value></block></next></block></next></block></statement><next><block type="device_pause" id="]^z9w[pYX8?UTMIH}/nT"><value name="pause"><shadow type="timePicker" id="=iw=#2[r4h:?bKMG0@XE"><field name="ms">1000</field></shadow></value></block></next></block></next></block></statement></block></next></block></next></block></next></block></statement></block></xml>